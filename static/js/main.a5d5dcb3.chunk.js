(this["webpackJsonpblog-context"]=this["webpackJsonpblog-context"]||[]).push([[0],{83:function(e,t,a){e.exports=a(95)},88:function(e,t,a){},95:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(7),o=a.n(s),c=(a(88),a(34)),i=a(18),l=a(10),m=a(11),d=a(13),u=a(12),p=a(15),h=a(30),g=a(27),f=a.n(g),v={home:"".concat("/blog-context/"),auth:"".concat("/blog-context/","auth"),create:"".concat("/blog-context/","create"),postById:"".concat("/blog-context/","post")},C=a(43);var E=function(e){return r.a.createElement(C.a,e,r.a.createElement("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}))},b=a(123),x=a(124),O=a(126),S=a(127),j=a(125),y="Blog",N="Create Post",I="Log in",w="Log out",k=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).handleCreatePostClick=function(t){var a=e.props,n=a.isLoggedIn,r=a.handleCreatePostClick;n||r(t)},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.isLoggedIn;return r.a.createElement(b.a,{position:"static"},r.a.createElement(x.a,{className:a.toolbar},r.a.createElement(p.b,{to:v.home,className:a.logo},r.a.createElement(j.a,{edge:"start",color:"inherit","aria-label":"blog",onClick:function(t){return e.handleCreatePostClick(!1,t)}},r.a.createElement(E,{fontSize:"large"}),r.a.createElement(O.a,{variant:"h4"},y))),r.a.createElement(p.b,{to:v.create,className:a.createPostLink},r.a.createElement(S.a,{className:a.linkBtn,color:"inherit",size:"large",onClick:function(){return e.handleCreatePostClick(!0)}},N)),r.a.createElement(p.b,{to:v.auth,className:a.authLink},n?r.a.createElement(S.a,{className:a.linkBtn,size:"large"},w):r.a.createElement(S.a,{className:a.linkBtn,size:"large",onClick:function(){return e.handleCreatePostClick(!1)}},I))))}}]),a}(r.a.Component),P=a(4),L=Object(P.a)({toolbar:{display:"flex",justifyContent:"flex-start"},logo:{color:"white",textDecoration:"none"},createPostLink:{marginLeft:"40px",textDecoration:"none"},authLink:{marginLeft:"auto",textDecoration:"none"},linkBtn:{color:"white"}})(k),U=a(132),A="Log in",D="* Username",T="* Password",W="Log In",B="* Username is empty",F="* Password is empty",M="* Password is incorrect",J=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e)).onUsernameChange=function(e){n.setState({username:e.target.value,isUsernameEmpty:!1})},n.onPasswordChange=function(e){n.setState({password:e.target.value,isPasswordEmpty:!1,isPasswordCorrect:!0})},n.passUser=function(e,t,a,n,r){t(!0,e),r?(a.push(v.create),n(!1)):a.push(v.home)},n.handleSubmitOnEnter=function(e){"Enter"===e.key&&n.handleLogIn()},n.handleLogIn=function(){var e=n.state,t=e.username,a=e.password,r=e.users,s=n.props,o=s.handleLogIn,c=s.history,i=s.isCreatePostClicked,l=s.handleCreatePostClick;if(t||a)if(t)if(a){var m={username:t.trim(),password:a};r.some((function(e){return e.username===m.username}))?r.forEach((function(e){e.password===m.password?n.setState({username:"",password:"",isUsernameEmpty:!1,isPasswordEmpty:!1,isPasswordCorrect:!0},(function(){n.passUser(m,o,c,l,i)})):n.setState({isPasswordCorrect:!1})})):n.passUser(m,o,c,l,i)}else n.setState({isPasswordEmpty:!0});else n.setState({isUsernameEmpty:!0});else n.setState({isUsernameEmpty:!0,isPasswordEmpty:!0})};var r=e.users||[];return n.state={username:"",password:"",isUsernameEmpty:!1,isPasswordEmpty:!1,isPasswordCorrect:!0,users:r},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.username,n=t.password,s=t.isUsernameEmpty,o=t.isPasswordEmpty,c=t.isPasswordCorrect,i=this.props.classes;return r.a.createElement("div",{className:i.loginContainer},r.a.createElement("div",{className:i.loginContent},r.a.createElement("div",{className:i.titleSection},r.a.createElement(O.a,{variant:"h4",className:i.title},A)),r.a.createElement("div",null,r.a.createElement("div",{className:i.usernameInput},r.a.createElement(U.a,{id:"standard-basic",label:s?B:D,error:s,fullWidth:!0,value:a,onChange:function(t){return e.onUsernameChange(t)},onKeyDown:this.handleSubmitOnEnter})),r.a.createElement("div",{className:i.passwordInput},r.a.createElement(U.a,{id:"standard-password-input",label:c?o?F:T:M,error:o||!c,type:"password",autoComplete:"current-password",fullWidth:!0,value:n,onChange:function(t){return e.onPasswordChange(t)},onKeyDown:this.handleSubmitOnEnter})),r.a.createElement("div",{className:i.loginBtn},r.a.createElement(S.a,{variant:"contained",size:"large",color:"primary",fullWidth:!0,onClick:this.handleLogIn},W)))))}}]),a}(r.a.Component),R="There is no post on web-site.",z="Log in",Y=" and be our first story teller.",G="share your story!",K="You've logged in, ";var V=function(e){var t=e.classes,a=e.isLoggedIn;return r.a.createElement("div",{className:t.homeContainer},r.a.createElement("div",{className:t.homeContent},r.a.createElement("div",{className:t.titleSection},r.a.createElement(O.a,{variant:"h5",className:t.title},R)),r.a.createElement("div",{className:t.textSection},a?r.a.createElement(O.a,{variant:"h4",className:t.text},K," ",r.a.createElement(p.b,{to:v.create},G)):r.a.createElement(O.a,{variant:"h4",className:t.text},r.a.createElement(p.b,{to:v.auth},z),Y)),r.a.createElement(h.b,{path:v.auth},r.a.createElement(J,null))))},H=Object(P.a)({homeContainer:{display:"flex",justifyContent:"center"},homeContent:{width:"50%"},titleSection:{marginTop:"20px",textAlign:"center"},title:{fontWeight:"bold"},textSection:{marginTop:"40px",textAlign:"center"},text:{fontWeight:"bold"}})(V),$=function(e){try{var t=localStorage.getItem(e);if(null===t)return;return JSON.parse(t)}catch(a){return}},q=function(e,t){try{var a=JSON.stringify(t);localStorage.setItem(e,a)}catch(n){throw new Error("Can't save changes in local storage")}},Q=a(128),X=a(129),Z=a(28),_=a.n(Z),ee=a(130),te="Tell us your story!",ae=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],ne=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e)).onTitleChange=function(e){n.setState({title:e.target.value})},n.onContentChange=function(e){n.setState({content:e.target.value})},n.onPostAdd=function(){var e=new Date,t=ae[e.getMonth()]+" "+e.getDate()+" "+e.getFullYear();n.setState((function(e){return{posts:[{id:e.currentId,title:e.title,content:e.content,date:t,userId:e.currentUserId}].concat(Object(c.a)(e.posts)),currentId:f()(),title:"",content:""}}),(function(){q("posts",n.state.posts),n.props.handlePostAdd(n.state.posts),n.props.history.push(v.home)}))};var r=f()(),s=$("posts")||[];return n.state={title:"",content:"",posts:s,currentId:r,currentUserId:n.props.currentUserId},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.title,n=t.content,s=this.props.classes;return r.a.createElement("div",{className:s.createPostContainer},r.a.createElement("div",{className:s.createPostContent},r.a.createElement(Q.a,{className:s.cardSection},r.a.createElement(X.a,null,r.a.createElement(O.a,{className:s.title,variant:"h6",gutterBottom:!0},te),r.a.createElement("div",null,r.a.createElement(U.a,{className:s.titleTextField,placeholder:"Write the title...",id:"standard-basic",label:"* Title",value:a,onChange:function(t){return e.onTitleChange(t)}})),r.a.createElement("div",{className:s.contentDiv},r.a.createElement(U.a,{className:s.contentTextField,placeholder:"Write the post...",id:"standard-multiline-static",label:"* Content",multiline:!0,rows:"10",value:n,onChange:function(t){return e.onContentChange(t)}})),r.a.createElement("div",{className:s.btnDiv},r.a.createElement(ee.a,{color:"primary",onClick:this.onPostAdd},r.a.createElement(_.a,null)))))))}}]),a}(r.a.Component),re=Object(h.g)(Object(P.a)({createPostContainer:{display:"flex",justifyContent:"center"},createPostContent:{width:"75%"},cardSection:{margin:"20px",boxShadow:"0px 1px 5px 0px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 3px 1px -2px rgba(0, 0, 0, 0.12)"},title:{textAlign:"center"},titleTextField:{width:"75%"},contentDiv:{margin:"16px 0"},contentTextField:{width:"100%"},btnDiv:{display:"flex",justifyContent:"flex-end"}})(ne)),se=a(77),oe=Object(h.g)(Object(P.a)({loginContainer:{display:"flex",justifyContent:"center"},loginContent:{width:"50%"},titleSection:{marginTop:"20px"},title:{fontWeight:"bold"},usernameInput:{marginTop:"16px",marginBottom:"8px"},passwordInput:{marginTop:"16px",marginBottom:"8px"},loginBtn:{margin:"30px 0"}})(J)),ce="Log out",ie="Are you sure you want to log out?",le="Log out",me=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).handleLogOut=function(){var t=e.props,a=t.handleLogOut,n=t.isCreatePostClicked,r=t.handleCreatePostClick;a(!1),n&&r(!1)},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("div",{className:t.logoutContainer},r.a.createElement("div",{className:t.logoutContent},r.a.createElement("div",{className:t.logoutTitleSection},r.a.createElement(O.a,{variant:"h4",className:t.title},ce)),r.a.createElement("div",{className:t.logoutText},r.a.createElement(O.a,{variant:"h6"},ie)),r.a.createElement("div",null,r.a.createElement(S.a,{variant:"contained",size:"large",color:"primary",onClick:function(){return e.handleLogOut()}},le))))}}]),a}(r.a.Component),de=Object(P.a)({logoutContainer:{display:"flex",justifyContent:"center"},logoutContent:{display:"flex",flexDirection:"column",alignItems:"center",width:"50%"},logoutTitleSection:{margin:"20px 0"},title:{fontWeight:"bold"},logoutText:{margin:"16px 0"}})(me);var ue=function(e){var t=e.component,a=Object(se.a)(e,["component"]),n=a.isLoggedIn,s=a.path,o=a.handleLogIn,c=a.handleLogOut,i=a.handleCreatePostClick,l=a.isCreatePostClicked,m=a.currentUserId,d=a.handlePostAdd,u=a.posts,p=a.users,g=a.computedMatch;return s===v.auth?n?r.a.createElement(h.b,{path:s},r.a.createElement(de,{handleLogOut:c,isCreatePostClicked:l,handleCreatePostClick:i})):r.a.createElement(h.b,{path:s},r.a.createElement(oe,{users:p,handleLogIn:o,isCreatePostClicked:l,handleCreatePostClick:i})):n?r.a.createElement(h.b,{path:s},r.a.createElement(t,Object.assign({currentUserId:m,handlePostAdd:d,posts:u},a,{postId:g.params.id}))):r.a.createElement(h.a,{to:{pathname:v.auth}})},pe=a(52),he={postContainer:{display:"flex",justifyContent:"center"},cardSection:{width:"75%"},cardWrapper:{margin:"20px",padding:"20px",boxShadow:"0px 1px 3px 0px rgba(0, 0, 0, 0.2), 0px 1px 1px 0px rgba(0, 0, 0, 0.14), 0px 2px 1px -1px rgba(0, 0, 0, 0.12)"},CardContent:{padding:0},titleSection:{display:"flex",padding:"16px 24px"},avatarSection:{margin:"auto 16px auto 0"},avatar:{backgroundColor:pe.a[500]},contentSection:{padding:"16px 24px"},CardActions:{justifyContent:"flex-end"},learnMoreLink:{textDecoration:"none"}},ge=a(131),fe=a(133);var ve=function(e){var t=e.classes,a=e.post,n=a.title,s=a.content,o=a.date,c=a.userId,i=a.id,l=$("users").find((function(e){return e.id===c})),m=l.username[0].toUpperCase();return r.a.createElement("div",{className:t.postContainer},r.a.createElement("div",{className:t.cardSection},r.a.createElement(Q.a,{className:t.cardWrapper},r.a.createElement(X.a,{className:t.CardContent},r.a.createElement("div",{className:t.titleSection},r.a.createElement("div",{className:t.avatarSection},r.a.createElement(fe.a,{className:t.avatar},m)),r.a.createElement("div",null,r.a.createElement(O.a,{gutterBottom:!0},n),r.a.createElement(O.a,{variant:"subtitle2",color:"textSecondary"},o," by ",l.username))),r.a.createElement("div",{className:t.contentSection},r.a.createElement(O.a,null,s))),r.a.createElement(ge.a,{className:t.CardActions},r.a.createElement(p.b,{to:"".concat(v.postById,"/").concat(i),className:t.learnMoreLink},r.a.createElement(S.a,{size:"medium",color:"secondary"},"Learn More"))))))},Ce=Object(P.a)(he)(ve),Ee="Posts",be=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(l.a)(this,a),n=t.call(this,e);var r=$("posts")||[];return n.state={posts:r},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this.state.posts,t=this.props.classes;return r.a.createElement("div",{className:t.postsContainer},r.a.createElement("div",{className:t.titleSection},r.a.createElement(O.a,{className:t.title,variant:"h4"},Ee)),r.a.createElement("div",{className:t.postSection},r.a.createElement("ul",{className:t.ul},e.map((function(e){return r.a.createElement(Ce,{key:e.id,post:e})})))))}}]),a}(r.a.Component),xe=Object(P.a)({postsContainer:{display:"flex",flexDirection:"column",alignItems:"center"},titleSection:{margin:"20px"},title:{fontWeight:"bold"},postSection:{width:"100%"},ul:{padding:0,margin:0}})(be),Oe={postContainer:{display:"flex",justifyContent:"center"},cardSection:{width:"75%"},cardWrapper:{margin:"20px",padding:"20px",boxShadow:"0px 1px 3px 0px rgba(0, 0, 0, 0.2), 0px 1px 1px 0px rgba(0, 0, 0, 0.14), 0px 2px 1px -1px rgba(0, 0, 0, 0.12)"},CardContent:{padding:0},titleSection:{display:"flex",padding:"16px 24px"},avatarSection:{margin:"auto 16px auto 0"},avatar:{backgroundColor:pe.a[500]},editIcon:{marginLeft:"auto"},contentSection:{padding:"16px 24px"},contentTextField:{width:"100%"},CardActions:{justifyContent:"flex-end"},buttonsSection:{display:"flex"},btnDiv:{marginLeft:"20px"}},Se=a(48),je=a.n(Se),ye=a(49),Ne=a.n(ye),Ie=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e)).onContentChange=function(e){n.setState({content:e.target.value})},n.handleIsEdit=function(){n.onSubmit()},n.onRemove=function(){n.setState((function(e){return{posts:e.posts.filter((function(t){return t.id!==e.post.id})),comments:e.comments.filter((function(t){return t.postId!==e.post.id}))}}),(function(){q("posts",n.state.posts),q("comments",n.state.comments),n.props.history.push(v.home)}))},n.onSubmit=function(){n.setState((function(e){return{post:Object(i.a)(Object(i.a)({},e.post),{},{content:e.content})}}),(function(){return n.setState((function(e){return{posts:e.posts.map((function(t){return t.id===e.post.id?e.post:t})),isEdit:!e.isEdit}}),(function(){return q("posts",n.state.posts)}))}))};var r=n.props,s=r.posts,o=r.post,c=r.comments,m=r.currentUserId,d=o.content,u=$("users"),p=u.find((function(e){return e.id===o.userId}));return n.state={posts:s,post:o,content:d,comments:c,currentUserId:m,users:u,user:p,isEdit:!1},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.content,n=t.isEdit,s=t.user,o=t.currentUserId,c=this.props.classes,i=this.state.post,l=i.title,m=i.date,d=s.username[0].toUpperCase(),u=o===s.id;return r.a.createElement("div",{className:c.postContainer},r.a.createElement("div",{className:c.cardSection},r.a.createElement(Q.a,{className:c.cardWrapper},r.a.createElement(X.a,{className:c.CardContent},r.a.createElement("div",{className:c.titleSection},r.a.createElement("div",{className:c.avatarSection},r.a.createElement(fe.a,{className:c.avatar},d)),r.a.createElement("div",null,r.a.createElement(O.a,{gutterBottom:!0},l),r.a.createElement(O.a,{variant:"subtitle2",color:"textSecondary"},m," by ",s.username)),r.a.createElement("div",{className:c.editIcon},r.a.createElement(j.a,{onClick:function(){return e.handleIsEdit()},disabled:!u},r.a.createElement(je.a,null)))),r.a.createElement("div",{className:c.contentSection},n?r.a.createElement(U.a,{className:c.contentTextField,placeholder:"Write the post...",id:"standard-multiline-static",label:"Post",multiline:!0,rows:"5",value:a,onChange:function(t){return e.onContentChange(t)}}):r.a.createElement(O.a,null,a))),r.a.createElement(ge.a,{className:c.CardActions},r.a.createElement("div",{className:c.buttonsSection},r.a.createElement("div",{className:c.btnDiv},r.a.createElement(ee.a,{onClick:this.onRemove,disabled:!u,color:"secondary"},r.a.createElement(Ne.a,null))),r.a.createElement("div",{className:c.btnDiv},r.a.createElement(ee.a,{color:"primary",disabled:!n,onClick:this.onSubmit},r.a.createElement(_.a,null))))))))}}]),a}(r.a.Component),we=Object(h.g)(Object(P.a)(Oe)(Ie)),ke=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],Pe=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e)).onCommentChange=function(e){n.setState({comment:e.target.value})},n.onCommentAdd=function(){var e=n.state,t=e.currentId,a=e.comment,r=e.userId,s=e.postId,o=new Date,c={id:t,comment:a,date:ke[o.getMonth()]+" "+o.getDate()+" "+o.getFullYear(),userId:r,postId:s};n.setState({comment:"",currentId:f()()},(function(){n.props.onCommentAdd(c)}))};var r=f()();return n.state={comment:"",currentId:r,postId:n.props.post.id,userId:n.props.currentUserId},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.state.comment,a=this.props.classes;return r.a.createElement("div",{className:a.createCommentContainer},r.a.createElement("div",{className:a.createCommentContent},r.a.createElement("div",{className:a.commentDiv},r.a.createElement(U.a,{className:a.commentTextField,placeholder:"Write the comment...",id:"standard-multiline-static",label:"* Comment",multiline:!0,rows:"4",value:t,onChange:function(t){return e.onCommentChange(t)}})),r.a.createElement("div",{className:a.btnDiv},r.a.createElement(ee.a,{color:"primary",onClick:this.onCommentAdd,disabled:!t},r.a.createElement(_.a,null)))))}}]),a}(r.a.Component),Le=Object(P.a)({createCommentContainer:{display:"flex",justifyContent:"center"},createCommentContent:{width:"75%"},commentDiv:{margin:"16px 0"},commentTextField:{width:"100%"},btnDiv:{display:"flex",justifyContent:"flex-end"}})(Pe),Ue={postContainer:{display:"flex",justifyContent:"center"},cardSection:{width:"75%"},cardWrapper:{margin:"20px",padding:"20px",boxShadow:"0px 1px 3px 0px rgba(0, 0, 0, 0.2), 0px 1px 1px 0px rgba(0, 0, 0, 0.14), 0px 2px 1px -1px rgba(0, 0, 0, 0.12)"},CardContent:{padding:0},titleSection:{display:"flex",padding:"16px 24px"},avatarSection:{margin:"auto 16px auto 0"},avatar:{backgroundColor:pe.a[500]},userSection:{display:"flex",alignItems:"center"},editIcon:{marginLeft:"auto"},commentSection:{padding:"16px 24px"},commentTextField:{width:"100%"},CardActions:{justifyContent:"flex-end"},buttonsSection:{display:"flex"}},Ae=a(31),De=r.a.createContext(null);var Te=function(e){var t=Object(n.useContext)(De),a=Object(n.useState)(e.comment),s=Object(Ae.a)(a,2),o=s[0],c=s[1],l=Object(n.useState)(t.comments),m=Object(Ae.a)(l,2),d=m[0],u=m[1],p=Object(n.useState)(o.comment),h=Object(Ae.a)(p,2),g=h[0],f=h[1],v=Object(n.useState)(t.currentUserId),C=Object(Ae.a)(v,1)[0],E=Object(n.useState)($("users")),b=Object(Ae.a)(E,1)[0],x=Object(n.useState)(b.find((function(e){return e.id===o.userId}))),S=Object(Ae.a)(x,1)[0],y=Object(n.useState)(!1),N=Object(Ae.a)(y,2),I=N[0],w=N[1];Object(n.useEffect)((function(){u(d.map((function(e){return e.id===o.id?Object(i.a)(Object(i.a)({},o),{},{comment:g}):e})))}),[o]),Object(n.useEffect)((function(){q("comments",d)}),[d]);var k=function(){c((function(e){return Object(i.a)(Object(i.a)({},e),{},{comment:g})})),w(!I)},P=e.classes,L=o.date,A=S.username[0].toUpperCase(),D=C===S.id;return r.a.createElement("div",{className:P.postContainer},r.a.createElement("div",{className:P.cardSection},r.a.createElement(Q.a,{className:P.cardWrapper},r.a.createElement(X.a,{className:P.CardContent},r.a.createElement("div",{className:P.titleSection},r.a.createElement("div",{className:P.avatarSection},r.a.createElement(fe.a,{className:P.avatar},A)),r.a.createElement("div",{className:P.userSection},r.a.createElement(O.a,{variant:"subtitle2",color:"textSecondary"},L," by ",S.username)),r.a.createElement("div",{className:P.editIcon},r.a.createElement(j.a,{onClick:function(){k()},disabled:!D},r.a.createElement(je.a,null)))),r.a.createElement("div",{className:P.commentSection},I?r.a.createElement(U.a,{className:P.commentTextField,placeholder:"Write the comment...",id:"standard-multiline-static",label:"Comment",multiline:!0,rows:"5",value:g,onChange:function(e){f(e.target.value)}}):r.a.createElement(O.a,null,g))),r.a.createElement(ge.a,{className:P.CardActions},r.a.createElement("div",{className:P.buttonsSection},r.a.createElement("div",{className:P.btnDiv},r.a.createElement(j.a,{onClick:function(){t.onCommentRemove(o)},disabled:!D,color:"secondary"},r.a.createElement(Ne.a,null))),r.a.createElement("div",null,r.a.createElement(j.a,{disabled:!I,onClick:k,color:"primary"},r.a.createElement(_.a,null))))))))},We=Object(P.a)(Ue)(Te);var Be=function(e){var t=e.classes,a=e.comments,n=e.postId,s=a.filter((function(e){return e.postId===n}));return r.a.createElement("div",{className:t.postsContainer},r.a.createElement("div",{className:t.postSection},r.a.createElement("ul",{className:t.ul},s.map((function(e){return r.a.createElement(We,{key:e.id,comment:e})})))))},Fe=Object(P.a)({postsContainer:{display:"flex",flexDirection:"column",alignItems:"center"},postSection:{width:"100%"},ul:{padding:0,margin:0}})(Be),Me="Post",Je="Comments",Re=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e)).onCommentAdd=function(e){n.setState((function(t){return{comments:[e].concat(Object(c.a)(t.comments))}}),(function(){q("comments",n.state.comments)}))},n.onCommentRemove=function(e){n.setState((function(t){return{comments:t.comments.filter((function(t){return t.id!==e.id}))}}),(function(){return q("comments",n.state.comments)}))};var r=$("posts")||[],s=r.find((function(e){return e.id===n.props.postId})),o=$("comments")||[];return n.state={posts:r,post:s,comments:o},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this.state,t=e.posts,a=e.post,n=e.comments,s=this.props,o=s.classes,c=s.currentUserId,i=s.postId;return r.a.createElement("div",{className:o.postsContainer},r.a.createElement("div",{className:o.titleSection},r.a.createElement(O.a,{className:o.title,variant:"h4"},Me)),r.a.createElement("div",{className:o.postSection},r.a.createElement(we,{key:a.id,post:a,posts:t,comments:n,currentUserId:c})),r.a.createElement("div",{className:o.titleSection},r.a.createElement(O.a,{className:o.title,variant:"h5"},Je)),r.a.createElement("div",{className:o.createCommentSection},r.a.createElement(Le,{post:a,onCommentAdd:this.onCommentAdd,comments:n,currentUserId:c})),r.a.createElement("div",{className:o.commentsSection},r.a.createElement(De.Provider,{value:{comments:n,currentUserId:c,onCommentRemove:this.onCommentRemove}},r.a.createElement(Fe,{comments:n,postId:i}))))}}]),a}(r.a.Component),ze=Object(P.a)({postsContainer:{display:"flex",flexDirection:"column",alignItems:"center"},titleSection:{margin:"10px",alignSelf:"flex-start",marginLeft:"12%"},title:{fontWeight:"bold"},postSection:{width:"100%"},createCommentSection:{width:"75%"},commentsSection:{width:"75%"}})(Re),Ye=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&window.scrollTo(0,0)}},{key:"render",value:function(){return this.props.children}}]),a}(r.a.Component),Ge=Object(h.g)(Ye),Ke=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e)).handleLogIn=function(e,t){var a=t.username,r=t.password,s=n.state.users.find((function(e){return e.username===a&&e.password===r}));s?n.setState((function(t){return{users:t.users.map((function(e){return e.id===s.id?Object(i.a)(Object(i.a)({},e),{},{isOnline:!0}):Object(i.a)(Object(i.a)({},e),{},{isOnline:!1})})),isLoggedIn:e,currentUserId:s.id}}),(function(){return q("users",n.state.users)})):n.setState((function(t){return{users:[{id:t.currentId,username:a,password:r,isOnline:!0}].concat(Object(c.a)(t.users)),currentId:f()(),isLoggedIn:e,currentUserId:t.currentId}}),(function(){return q("users",n.state.users)}))},n.handleLogOut=function(e){var t=n.state.users.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{isOnline:!1})}));n.setState({users:t,isLoggedIn:e},(function(){return q("users",n.state.users)}))},n.handleCreatePostClick=function(e){n.setState({isCreatePostClicked:e})},n.handlePostAdd=function(e){n.setState({posts:e})};var r=$("users")||[],s=f()(),o=$("posts")||[],m=r.some((function(e){return e.isOnline})),d=m?r.find((function(e){return e.isOnline})).id:"";return n.state={isLoggedIn:m,users:r,currentId:s,isCreatePostClicked:!1,currentUserId:d,posts:o},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this.state,t=e.isLoggedIn,a=e.isCreatePostClicked,n=e.currentUserId,s=e.posts,o=e.users,c=this.props.classes;return r.a.createElement("div",{className:c.mainContainer},r.a.createElement(p.a,null,r.a.createElement(Ge,null,r.a.createElement(L,{isLoggedIn:t,handleCreatePostClick:this.handleCreatePostClick}),r.a.createElement(h.d,null,r.a.createElement(h.b,{exact:!0,path:"/"},r.a.createElement(h.a,{to:{pathname:v.home}})),r.a.createElement(h.b,{exact:!0,path:v.home},s.length>0?r.a.createElement(xe,null):r.a.createElement(H,{isLoggedIn:t})),r.a.createElement(ue,{path:v.create,isLoggedIn:t,component:re,currentUserId:n,handlePostAdd:this.handlePostAdd}),r.a.createElement(ue,{path:v.auth,users:o,isLoggedIn:t,isCreatePostClicked:a,handleLogIn:this.handleLogIn,handleLogOut:this.handleLogOut,handleCreatePostClick:this.handleCreatePostClick}),r.a.createElement(ue,{path:"".concat(v.postById,"/:id"),isLoggedIn:t,component:ze,currentUserId:n,posts:s})))))}}]),a}(r.a.Component),Ve=Object(P.a)({mainContainer:{backgroundColor:"#f9f9f9",minHeight:"100vh"}})(Ke);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Ve,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[83,1,2]]]);
//# sourceMappingURL=main.a5d5dcb3.chunk.js.map